<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Cloudbeds ID Scanner</title>
		<link rel="stylesheet" href="popup.css" />
	</head>
	<body>
		<div class="container">
			<!-- Header con botÃ³n de opciones -->
			<div class="header">
				<h1>ğŸªª ID Scanner</h1>
				<button id="toggleOptions" class="btn-icon" title="Opciones">âš™ï¸</button>
			</div>
			<p class="subtitle">Escanea pasaportes, DNI o NIE</p>

			<!-- Panel de opciones (oculto por defecto) -->
			<div id="optionsPanel" class="options-panel hidden">
				<div class="options-content">
					<h3>âš™ï¸ ConfiguraciÃ³n</h3>

					<label for="apiKey">OpenAI API Key:</label>
					<div class="input-group">
						<input type="password" id="apiKey" placeholder="sk-..." />
						<button id="toggleKey" class="btn-icon" title="Mostrar/Ocultar">ğŸ‘ï¸</button>
					</div>
					<button id="saveKey" class="btn btn-secondary btn-full">Guardar API Key</button>
					<div id="keyStatus" class="status"></div>

					<hr class="options-divider" />

					<label>Carpeta de escaneos (Brother):</label>
					<div id="scanFolderPath" class="folder-path">No configurada</div>
					<button id="selectFolderBtn" class="btn btn-secondary btn-full">ğŸ“‚ Seleccionar carpeta</button>
					<div id="folderStatus" class="status"></div>
				</div>
			</div>

			<!-- Subir imagen -->
			<div id="upload-section" class="section">
				<div id="dropZone" class="drop-zone">
					<span class="drop-icon">ğŸ“„</span>
					<p>Arrastra una imagen o usa el escÃ¡ner</p>
					<div class="button-row">
						<button id="selectFileBtn" class="btn btn-primary btn-small">ğŸ“ Archivo</button>
						<button id="loadScanBtn" class="btn btn-secondary btn-small" title="Cargar Ãºltimo escaneo (1 imagen)">
							ğŸ–¨ï¸ EscÃ¡ner
						</button>
					</div>
					<div class="button-row" style="margin-top: 8px">
						<button
							id="loadDniBtn"
							class="btn btn-dni btn-full"
							title="Cargar 2 Ãºltimos escaneos para DNI espaÃ±ol (anverso y reverso)"
						>
							ğŸªª DNI EspaÃ±ol (2 caras)
						</button>
					</div>
					<input type="file" id="fileInput" accept="image/*" />
				</div>

				<div id="preview" class="preview hidden">
					<img id="previewImage" alt="Preview" />
					<span id="previewLabel" class="preview-label hidden"></span>
					<button id="clearImage" class="btn-icon" title="Eliminar">âŒ</button>
				</div>

				<!-- Preview para DNI (2 imÃ¡genes) -->
				<div id="previewDni" class="preview-dni hidden">
					<div class="dni-images">
						<div class="dni-image-container">
							<img id="previewImage1" alt="Cara 1" />
							<span class="dni-label">Imagen 1</span>
						</div>
						<div class="dni-image-container">
							<img id="previewImage2" alt="Cara 2" />
							<span class="dni-label">Imagen 2</span>
						</div>
					</div>
					<button id="clearDniImages" class="btn-icon btn-clear-dni" title="Eliminar">âŒ</button>
				</div>
			</div>

			<!-- BotÃ³n principal -->
			<button id="scanBtn" class="btn btn-success btn-large" disabled>
				<span id="scanText">ğŸ” Escanear y Rellenar</span>
				<span id="scanLoader" class="loader hidden"></span>
			</button>

			<!-- Resultados (opcional, para mostrar datos extraÃ­dos) -->
			<div id="results" class="results hidden">
				<details>
					<summary>Ver datos extraÃ­dos</summary>
					<div id="extractedData"></div>
				</details>
			</div>

			<!-- Mensajes de estado -->
			<div id="statusMessage" class="status-message hidden"></div>
		</div>

		<script src="popup.js"></script>
	</body>
</html>
